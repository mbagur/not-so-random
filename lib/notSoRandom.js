!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("notSoRandom",[],t):"object"==typeof exports?exports.notSoRandom=t():e.notSoRandom=t()}(this,function(){return function(e){function t(o){if(r[o])return r[o].exports;var s=r[o]={exports:{},id:o,loaded:!1};return e[o].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t){"use strict";function r(e,t){return e.filter(function(e){return t.indexOf(e)<0})}function o(e,t){for(var o=0;o<t.length;++o){var s=e.filter(t[o].test);u[o]={possibles:s,exclusives:s,count:t[o].count}}for(var o=0;o<t.length;++o){for(var n=0;n<t.length;++n)o!=n&&(u[o].exclusives=r(u[o].exclusives,u[n].possibles));if(u[o].trustScore=u[o].exclusives.length-u[o].count,0==c.length||c[0].trustScore>=u[o].trustScore)c.splice(0,0,{i:o,trustScore:u[o].trustScore});else if(c[c.length-1].trustScore<=u[o].trustScore)c.push({i:o,trustScore:u[o].trustScore});else for(var i=0;i<c.length-1;i++)if(c[i].trustScore<=u[o].trustScore&&c[i+1].trustScore>=u[o].trustScore){c.splice(i,0,{i:o,trustScore:u[o].trustScore});break}}}function s(e,t){var r=[];return c.forEach(function(e){var t=u[e.i];r.forEach(function(e){var r=t.possibles.indexOf(e);r>=0&&t.possibles.splice(r,1)});for(var o=0;o<t.count;++o){if(0==t.possibles.length)throw new Error("Impossible to extract enough matches for rule "+e.i);var s=Math.floor(Math.random()*t.possibles.length),n=t.possibles[s];r.push(n),t.possibles.splice(s,1)}}),r}function n(e,t){return u={},c=[],o(e,t),s(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var u={},c=[];t["default"]=n}])});