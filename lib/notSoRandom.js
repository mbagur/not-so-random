!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("notSoRandom",[],e):"object"==typeof exports?exports.notSoRandom=e():t.notSoRandom=e()}(this,function(){return function(t){function e(o){if(r[o])return r[o].exports;var s=r[o]={exports:{},id:o,loaded:!1};return t[o].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e){"use strict";function r(t,e){return t.filter(function(t){return e.indexOf(t)<0})}function o(t,e){for(var o=0;o<e.length;++o){var s=t.filter(e[o].test);u[o]={possibles:s,exclusives:s,count:e[o].count}}for(var o=0;o<e.length;++o){for(var n=0;n<e.length;++n)o!=n&&(u[o].exclusives=r(u[o].exclusives,u[n].possibles));if(u[o].trustScore=u[o].exclusives.length-u[o].count,0==c.length||c[0].trustScore>=u[o].trustScore)c.splice(0,0,{i:o,trustScore:u[o].trustScore});else if(c[c.length-1].trustScore<=u[o].trustScore)c.push({i:o,trustScore:u[o].trustScore});else for(var i=0;i<c.length-1;i++)if(c[i].trustScore<=u[o].trustScore&&c[i+1].trustScore>=u[o].trustScore){c.splice(i,0,{i:o,trustScore:u[o].trustScore});break}}}function s(t,e){var r=[];return c.forEach(function(t){var e=u[t.i];r.forEach(function(t){var r=e.possibles.indexOf(t);r>=0&&e.possibles.splice(r,1)});for(var o=0;o<e.count;++o){if(0==e.possibles.length)throw new Error("Impossible to extract enough matches for rule "+t.i);var s=Math.floor(Math.random()*e.possibles.length),n=e.possibles[s];r.push(n),e.possibles.splice(s,1)}}),r}function n(t,e){return o(t,e),s(t,e)}var u={},c=[];t.exports=n}])});